## Theme

This chapter discusses the `cbu_theme()` function for styling the ggplot objects into cbu-styled plots.

**note**: should we have logo on the plots?

## The function

Put the function here and discuss it a bit.

```{r}
library(tidyverse)
library(showtext)

font_add_google("Open Sans")
showtext_auto()
font <- "Open Sans"

theme_cbu <- function() {
  theme_minimal(base_size = 14, base_family = "Open Sans") +
    theme(panel.grid.minor = element_blank(),
          panel.grid.major = element_line(linetype = "dashed", color = "grey80", linewidth = .5),
          plot.background = element_rect(fill = "white", color = NA),
          plot.title = element_text(size = 1.68*14, face = "bold", family = "Space Grotesk"),
          plot.subtitle = element_text(face = "italic", family = "Space Grotesk"),
          axis.title = element_text(face = "bold"),
          strip.text = element_text(face = "bold"),
          strip.background = element_rect(fill = NA, color = NA),
          plot.caption = element_text(face = "italic", family = "Space Grotesk"),
          legend.title = element_text(face = "bold"),
          legend.position='top', 
          legend.justification='left',
          legend.direction='horizontal',
          plot.title.position = "plot")
}
```

The function is based on theme minimal. It uses **XXX font** with base size of **XX**. The main idea behind the theme function was to declutter the plot and take care of some basic layout & text hierarchy (especially the legend which can be rendered a bit awkwardly by default).

## How it looks like

Make a plot that shows each element with the spacing, font sizes etc.

```{r}
some_df <- data.frame(
    a = sample(letters[1:7], 1000, replace = T)
) %>%
count(a)

some_df %>%
ggplot(aes(x = a, y = n)) +
geom_col(fill = "#b96784", width = .6) +
geom_text(aes(label = n), nudge_y = 2) +
labs(x = "letters", y = "counts") +
coord_flip() +
theme_cbu()
```

## Table theming

Cbu report format works on typst which necessitates using `{tinytable}` package for making table as it is currently the only one that supports rendering in typst without problems. The main 2 types of tables used in cbu reports are ones containing primarily numbers (e.g. summary statistics, reporting model coefficients) and ones containing primarily text (e.g. item wording). Those can be styled a bit differently to fit conventions and the particular content.

-   numbers: summary stats

-   text tables:

    -   issues: long text

    -   merging cells

-   model output tables:

    -   general information that should be included in a table that describes a model are pretty much the same as standard APA stuff: include uncertainty (standard errors or confidence intervals)